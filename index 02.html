<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur de Dates</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 15px;
            background: linear-gradient(to bottom, #1e3c72 0%, #2a5298 50%, #7e8ba3 100%);
        }
        .container {
            background: linear-gradient(145deg, #ffffff 0%, #f0f0f0 100%);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
            text-align: center;
            max-width: 450px;
            width: 100%;
            border: 3px solid rgba(255,255,255,0.3);
        }
        .logo {
            width: 80px;
            height: 80px;
            margin: 0 auto 15px;
            display: block;
        }
        h1 {
            color: #1e3c72;
            margin-bottom: 15px;
            font-size: 26px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        .date-display {
            font-size: 20px;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: bold;
            line-height: 1.2;
        }
        .input-group {
            margin: 15px 0;
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: #1e3c72;
            font-weight: bold;
            font-size: 15px;
        }
        input[type="number"] {
            width: 180px;
            padding: 10px;
            font-size: 18px;
            border: 3px solid #2a5298;
            border-radius: 10px;
            text-align: center;
            background: #fff;
            transition: all 0.3s;
        }
        input[type="number"]:focus {
            outline: none;
            border-color: #1e3c72;
            box-shadow: 0 0 10px rgba(30, 60, 114, 0.3);
        }
        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 12px;
            background: rgba(255,255,255,0.6);
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }
        .gregorian-date {
            font-size: 20px;
            font-weight: bold;
            margin: 5px 0;
            line-height: 1.3;
        }
        .hijri-date {
            font-size: 19px;
            font-weight: bold;
            margin: 5px 0;
            direction: rtl;
            line-height: 1.3;
        }
        .holiday-name {
            font-size: 17px;
            font-weight: bold;
            margin: 5px 0;
            padding: 8px;
            border-radius: 8px;
            background: rgba(255,255,255,0.7);
            animation: blink 0.6s infinite;
            line-height: 1.2;
        }
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="TA.jpg" alt="Logo" class="logo">
        <h1>Calculateur de Dates</h1>
        
        <div class="date-display" id="todayDate"></div>
        
        <div class="input-group">
            <label for="daysInput">Nombre de jours à ajouter/soustraire :</label>
            <input type="number" id="daysInput" value="28">
        </div>
        
        <div class="result" id="result"></div>
    </div>

    <script>
        // Jours fériés algériens grégoriens (fixes)
        const gregorianHolidays = {
            '01-01': 'Nouvel An',
            '05-01': 'Fête du Travail',
            '07-05': 'Fête de l\'Indépendance',
            '11-01': 'Anniversaire de la Révolution'
        };

        // Jours fériés lunaires approximatifs (Hijri) - ces dates varient chaque année
        // Format: mois-jour (mois Hijri commence à 1)
        const hijriHolidays = {
            '1-1': 'رأس السنة الهجرية',
            '1-10': 'عاشوراء',
            '3-12': 'المولد النبوي الشريف',
            '10-1': 'عيد الفطر',
            '12-10': 'عيد الأضحى'
        };

        // Fonction pour convertir la date grégorienne en Hijri
        function gregorianToHijri(date) {
            const greg = new Date(date);
            
            // Algorithme de conversion grégorien vers Hijri
            let year = greg.getFullYear();
            let month = greg.getMonth() + 1;
            let day = greg.getDate();
            
            // Calcul du jour julien
            let a = Math.floor((14 - month) / 12);
            let y = year + 4800 - a;
            let m = month + 12 * a - 3;
            let jd = day + Math.floor((153 * m + 2) / 5) + 365 * y + Math.floor(y / 4) - Math.floor(y / 100) + Math.floor(y / 400) - 32045;
            
            // Conversion vers le calendrier Hijri
            let l = jd - 1948440 + 10632;
            let n = Math.floor((l - 1) / 10631);
            l = l - 10631 * n + 354;
            let j = (Math.floor((10985 - l) / 5316)) * (Math.floor((50 * l) / 17719)) + (Math.floor(l / 5670)) * (Math.floor((43 * l) / 15238));
            l = l - (Math.floor((30 - j) / 15)) * (Math.floor((17719 * j) / 50)) - (Math.floor(j / 16)) * (Math.floor((15238 * j) / 43)) + 29;
            
            let hijriMonth = Math.floor((24 * l) / 709);
            let hijriDay = l - Math.floor((709 * hijriMonth) / 24);
            let hijriYear = 30 * n + j - 30;
            
            return {
                year: hijriYear,
                month: hijriMonth,
                day: hijriDay
            };
        }

        // Noms des mois Hijri en arabe
        const hijriMonths = [
            'محرم', 'صفر', 'ربيع الأول', 'ربيع الثاني', 'جمادى الأولى', 'جمادى الآخرة',
            'رجب', 'شعبان', 'رمضان', 'شوال', 'ذو القعدة', 'ذو الحجة'
        ];

        function formatHijriDate(hijri) {
            return `${hijri.day} ${hijriMonths[hijri.month - 1]} ${hijri.year} هـ`;
        }

        function checkGregorianHoliday(date) {
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const key = `${month}-${day}`;
            return gregorianHolidays[key] || null;
        }

        function checkHijriHoliday(hijri) {
            const key = `${hijri.month}-${hijri.day}`;
            return hijriHolidays[key] || null;
        }

        function formatDate(date) {
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('fr-FR', options);
        }

        function updateResult() {
            const days = parseInt(document.getElementById('daysInput').value) || 0;
            const today = new Date();
            const resultDate = new Date(today);
            resultDate.setDate(resultDate.getDate() + days);

            const gregHoliday = checkGregorianHoliday(resultDate);
            const hijri = gregorianToHijri(resultDate);
            const hijriHoliday = checkHijriHoliday(hijri);

            const isHoliday = gregHoliday || hijriHoliday;

            let html = '';
            
            // Date grégorienne - toujours en rouge
            html += `<div class="gregorian-date" style="color: red">
                ${formatDate(resultDate)}
            </div>`;
            
            if (gregHoliday) {
                html += `<div class="holiday-name" style="color: red">${gregHoliday}</div>`;
            }

            // Date Hijri - toujours en vert
            html += `<div class="hijri-date" style="color: green">
                ${formatHijriDate(hijri)}
            </div>`;
            
            if (hijriHoliday) {
                html += `<div class="holiday-name" style="color: green; direction: rtl">${hijriHoliday}</div>`;
            }

            document.getElementById('result').innerHTML = html;
        }

        // Afficher la date d'aujourd'hui
        document.getElementById('todayDate').textContent = formatDate(new Date());

        // Événement sur le changement du textbox
        document.getElementById('daysInput').addEventListener('input', updateResult);

        // Calcul initial
        updateResult();
    </script>
</body>
</html>